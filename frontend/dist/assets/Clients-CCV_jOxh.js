import{d,e as s,s as C,t as n,k as v,F as p,p as b,r as y,u as k,o as w,x as M,B as c,n as x}from"./index-pkYPjNuK.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={name:"Clients",setup(){const o=y([]);k();const e=async()=>{try{const t=await M.list();o.value=t.data}catch(t){console.error("Failed to load clients:",t)}},r=t=>new Date(t).toLocaleString(),i=t=>{const a=new Date,m=new Date(t),g=a-m,l=Math.floor(g/6e4);if(l<1)return"Just now";if(l<60)return`${l}m ago`;const _=Math.floor(l/60);if(_<24)return`${_}h ago`;const h=Math.floor(_/24);return h<30?`${h}d ago`:r(t)},f=()=>o.value.filter(t=>t.is_active).length,u=async t=>{try{console.log("Pinging client:",t.machine_id||t.id),alert(`Ping sent to ${t.hostname}`)}catch(a){console.error("Failed to ping client:",a),alert("Failed to ping client")}};return w(()=>{e()}),{clients:o,formatDate:r,getRelativeTime:i,getActiveCount:f,pingClient:u,loadClients:e}}},F={class:"clients-modern"},B={class:"header-section"},L={class:"header-card"},N={class:"header-content"},P={class:"header-left"},S={class:"clients-summary"},O={class:"total-count"},R={class:"active-count"},T={class:"refresh-section"},V={class:"clients-grid"},I={class:"client-header"},z={class:"client-info"},E={class:"client-hostname"},H={class:"client-id"},J={class:"status-text"},j={class:"client-details"},q={class:"detail-row"},G={class:"detail-item"},K={class:"detail-value os-info"},Q={class:"detail-item"},U={class:"detail-value arch-info"},W={class:"detail-row"},X={class:"detail-item full-width"},Y={class:"detail-value last-seen"},Z={class:"client-actions"},$=["onClick","disabled"],ss={key:0,class:"empty-state"};function ts(o,e,r,i,f,u){return c(),d("div",F,[s("div",B,[s("div",L,[s("div",N,[s("div",P,[e[2]||(e[2]=s("h1",null,"Client Machines",-1)),s("div",S,[s("span",O,n(i.clients.length)+" total clients",1),s("span",R,n(i.getActiveCount())+" active",1)])]),s("div",T,[s("button",{onClick:e[0]||(e[0]=(...t)=>i.loadClients&&i.loadClients(...t)),class:"refresh-btn"},e[3]||(e[3]=[s("span",{class:"btn-icon"},"ðŸ”„",-1),v(" Refresh ",-1)]))])])])]),s("div",V,[(c(!0),d(p,null,b(i.clients,t=>(c(),d("div",{key:t.machine_id||t.id,class:"modern-client-card"},[s("div",I,[s("div",z,[s("h3",E,n(t.hostname),1),s("div",H,n(t.machine_id||t.id),1)]),s("div",{class:x(["status-badge",{active:t.is_active}])},[e[4]||(e[4]=s("span",{class:"status-dot"},null,-1)),s("span",J,n(t.is_active?"Online":"Offline"),1)],2)]),s("div",j,[s("div",q,[s("div",G,[e[5]||(e[5]=s("div",{class:"detail-label"},"Operating System",-1)),s("div",K,n(t.os_info),1)]),s("div",Q,[e[6]||(e[6]=s("div",{class:"detail-label"},"Architecture",-1)),s("div",U,n(t.architecture),1)])]),s("div",W,[s("div",X,[e[7]||(e[7]=s("div",{class:"detail-label"},"Last Seen",-1)),s("div",Y,n(i.getRelativeTime(t.last_seen)),1)])])]),s("div",Z,[s("button",{onClick:a=>i.pingClient(t),class:"ping-btn",disabled:!t.is_active},e[8]||(e[8]=[s("span",{class:"btn-icon"},"ðŸ“¡",-1),v(" Ping Client ",-1)]),8,$)])]))),128))]),i.clients.length===0?(c(),d("div",ss,[e[10]||(e[10]=s("div",{class:"empty-icon"},"ðŸ’»",-1)),e[11]||(e[11]=s("h3",null,"No Client Machines Found",-1)),e[12]||(e[12]=s("p",null,"Connect your first Linux client to get started.",-1)),s("button",{onClick:e[1]||(e[1]=(...t)=>i.loadClients&&i.loadClients(...t)),class:"refresh-btn"},e[9]||(e[9]=[s("span",{class:"btn-icon"},"ðŸ”„",-1),v(" Check Again ",-1)]))])):C("",!0)])}const ns=A(D,[["render",ts],["__scopeId","data-v-cb9afc73"]]);export{ns as default};
